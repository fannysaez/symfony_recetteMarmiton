<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <!-- Chargement de Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chargement des icônes Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Chargement de Font Awesome si nécessaire, mais pas utilisé pour les icônes "œil" -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


    {% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/styles/variables.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/styles/app.css') }}">
    {% endblock %}

    {% block javascripts %}
    {% block importmap %}{{ importmap('app') }}{% endblock %}
    <script>
        // Dark mode toggle
        document.addEventListener('DOMContentLoaded', function () {
            const switcher = document.getElementById('darkModeSwitch');
            const body = document.body;
            // Récupère le mode depuis le localStorage
            if (localStorage.getItem('darkMode') === 'on') {
                body.classList.add('dark');
                if (switcher) switcher.checked = true;
            }
            if (switcher) {
                switcher.addEventListener('change', function () {
                    if (this.checked) {
                        body.classList.add('dark');
                        localStorage.setItem('darkMode', 'on');
                    } else {
                        body.classList.remove('dark');
                        localStorage.setItem('darkMode', 'off');
                    }
                });
            }
        });
    </script>
    {% endblock %}
</head>

<body>
    {% include "_partials/header.html.twig" %}

    {# Affichage des messages flash #}
    {% for message in app.flashes('success') %}
    <div class="alert alert-success alert-dismissible fade show text-center" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}

    {% block body %}
    {% endblock %}

    {% include '_partials/footer.html.twig' %}
</body>

</html>